import{u as f,r as l,b as j,j as a,L as v,I as N,a as k,c as I,d as w}from"./index-BU9T7kZz.js";function D({id:o,nome:c,foto:t,situacao:d,dataDesaparecimento:x,paginaAtual:m,situacaoAtualVivoMorto:g}){const u=f();return l.useEffect(()=>{o&&j(o).then(n=>{}).catch(n=>{console.error("Erro ao buscar dados:",n)})},[o]),a.jsx(v,{to:`/detalhes/${o}`,state:{backgroundLocation:u,paginaAtual:m},children:a.jsxs("div",{className:"bg-white gap-2 h-full rounded-md shadow-lg p-3 flex flex-col items-center border border-gray-200 hover:shadow-2xl transition",children:[a.jsx("span",{className:`inline-block mt-1 px-3x py-2 p-2 text-md font-bold rounded-md ${d==="DESAPARECIDO"?"bg-red-200 text-red-800 dark:bg-red-800 dark:text-white":"bg-green-200 text-green-800 dark:bg-green-800 dark:text-white"}`,children:d}),a.jsx(N,{src:t,alt:c,destaqueStatus:g==!0?"Vivo":"Morto",className:"w-64 h-64 object-cover group-hover:scale-105 transition-transform duration-300"}),a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("h2",{className:"text-lg font-bold text-primary",children:c}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Desaparecido desde:"," ",new Date(x).toLocaleDateString("pt-BR")]}),a.jsx("button",{className:"mt-2 px-4 py-2 bg-accent rounded hover:bg-secondary transition",children:"Ver detalhes"})]})]})})}function C(){const[o]=k(),c=Number(o.get("pagina"))||1,[t,d]=l.useState(c-1),[x,m]=l.useState(0),[g,u]=l.useState(0),n=10,[b,h]=l.useState([]),{mostrarFiltros:p,alternarFiltros:y}=I(),[s,i]=l.useState({nome:"",sexo:"",faixaIdadeInicial:0,faixaIdadeFinal:0,status:"DESAPARECIDO"});return l.useEffect(()=>{(async()=>{try{const r=await w(t,s);h(r.data.content||[]),m(r.data.totalPages||0),u(r.data.totalElements||0)}catch(r){console.error("Erro ao carregar desaparecidos:",r)}})()},[t,JSON.stringify(s)]),a.jsxs("div",{className:"p-1 max-w-7xl mx-auto",children:[p&&a.jsx("div",{className:"fixed inset-0 z-40 flex items-start justify-center pt-40 backdrop-blur-sm bg-black/30",children:a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded shadow-lg w-full max-w-4xl p-6 relative",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Filtros"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("label",{className:"flex flex-col items-start",children:["Nome",a.jsx("input",{type:"text",className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.nome,onChange:e=>i(r=>({...r,nome:e.target.value}))})]}),a.jsxs("label",{className:"flex flex-col items-start",children:["Sexo",a.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.sexo,onChange:e=>i(r=>({...r,sexo:e.target.value})),children:[a.jsx("option",{value:"",children:"Sexo"}),a.jsx("option",{value:"MASCULINO",children:"Masculino"}),a.jsx("option",{value:"FEMININO",children:"Feminino"})]})]}),a.jsxs("label",{className:"flex flex-col items-start",children:["Idade Minima",a.jsx("input",{type:"text",placeholder:"Idade mínima",value:s.faixaIdadeInicial,className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",onChange:e=>{console.log(e.target.value),i(r=>({...r,faixaIdadeInicial:Number(e.target.value)}))}})]}),a.jsxs("label",{className:"flex flex-col items-start",children:["Idade Maxima",a.jsx("input",{type:"text",placeholder:"Idade máxima",className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.faixaIdadeFinal,onChange:e=>i(r=>({...r,faixaIdadeFinal:Number(e.target.value)}))})]}),a.jsxs("label",{className:"flex flex-col items-start",children:["Situação",a.jsxs("select",{className:"w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded p-2",value:s.status,onChange:e=>i(r=>({...r,status:e.target.value})),children:[a.jsx("option",{value:"LOCALIZADO",children:"LOCALIZADO"}),a.jsx("option",{value:"DESAPARECIDO",children:"DESAPARECIDO"})]})]})]}),a.jsxs("div",{className:"mt-6 flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>{i({nome:"",sexo:"",faixaIdadeInicial:0,faixaIdadeFinal:0,status:"DESAPARECIDO"}),d(0)},className:"bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white px-4 py-2 transition",children:"Limpar Filtros"}),a.jsx("button",{onClick:y,className:"ml-auto text-sm text-gray-500 hover:text-red-500",children:"Fechar Filtros ✕"})]})]})}),a.jsx("div",{className:" px-4 py-3 transition ext-xl font-bold mb-4",children:s.status+"S"}),b.length==0?a.jsx("div",{className:"col-span-full text-center text-gray-500",children:"Carregando dados..."}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:b.map(e=>{var r;return a.jsx(D,{id:e.id,nome:e.nome,foto:e.urlFoto,situacao:s.status,situacaoAtualVivoMorto:e.vivo,dataDesaparecimento:((r=e.ultimaOcorrencia)==null?void 0:r.dtDesaparecimento)??"",paginaAtual:t+1},e.id)})}),a.jsxs("div",{className:"mt-6 flex flex-col items-center gap-2",children:[a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white",disabled:t===0,onClick:()=>d(e=>e-1),children:"Anterior"}),a.jsxs("span",{className:"px-4 py-2 font-semibold text-gray-800 dark:text-white",children:["Página ",t+1," de ",x]}),a.jsx("button",{className:"px-4 py-2 bg-gray-200 dark:bg-gray-800 rounded hover:bg-gray-400 dark:hover:bg-gray-400 disabled:opacity-50 dark:text-white",disabled:t+1>=x,onClick:()=>d(e=>e+1),children:"Próxima"})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Exibindo ",t*n+1," a ",Math.min((t+1)*n,g)," de ",g," registros"]})]})]})}export{C as default};
